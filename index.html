<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Youma's Portfolio</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="nav">
        <ul class="navigation">
            <li>home</li>
            <li>works</li>
            <li>service</li>
            <li>about</li>
            <li>contact</li>
        </ul>
    </header>
    <div class="container">
        <section class="section blue">home</section>
        <section class="section green">works</section>
        <section class="section purple">service</section>
        <section class="section yellow">about</section>
        <section class="section pink">contact</section>
    </div>
    <script>
const container = document.querySelector('.container');
const sections = document.querySelectorAll('.section');
const navItems = document.querySelectorAll('.navigation li');

let isScrolling = false;

// --- MISE À JOUR DE LA NAV ---
// On extrait la logique pour qu'elle soit réutilisable
const updateActiveNav = () => {
    const index = Math.round(container.scrollLeft / window.innerWidth);
    navItems.forEach((item, i) => {
        item.classList.toggle('active', i === index);
    });
};

// --- LE CŒUR DE LA DÉTECTION (Flèches, Pavé tactile, Scroll natif) ---
// L'événement 'scroll' détecte TOUT, y compris les flèches du clavier.
container.addEventListener('scroll', () => {
    // Si on n'est pas en train d'animer via un clic menu, on met à jour
    if (!isScrolling) {
        updateActiveNav();
    }
}, { passive: true });

// --- NAVIGATION AU CLIC ---
navItems.forEach((item, index) => {
    item.addEventListener('click', () => {
        isScrolling = true;
        container.scrollTo({
            left: index * window.innerWidth,
            behavior: 'smooth'
        });
        
        navItems.forEach(nav => nav.classList.remove('active'));
        item.classList.add('active');

        // On attend la fin de l'animation smooth pour rendre la main à l'event scroll
        setTimeout(() => isScrolling = false, 700);
    });
});

// --- GESTION DE LA MOLETTE (Forcer le passage d'une section à l'autre) ---
window.addEventListener('wheel', (e) => {
    const targetIsInsideContainer = e.target.closest('.container');
    if (!targetIsInsideContainer || isScrolling || Math.abs(e.deltaY) < 10) return;

    e.preventDefault();
    isScrolling = true;

    const currentSectionIndex = Math.round(container.scrollLeft / window.innerWidth);
    const nextSectionIndex = e.deltaY > 0 
        ? Math.min(sections.length - 1, currentSectionIndex + 1)
        : Math.max(0, currentSectionIndex - 1);
    
    container.scrollTo({
        left: nextSectionIndex * window.innerWidth,
        behavior: 'smooth'
    });

    setTimeout(() => {
        updateActiveNav();
        isScrolling = false;
    }, 700); 
}, { passive: false });

// Initialisation
updateActiveNav();

// Optionnel : Mise à jour si l'utilisateur redimensionne la fenêtre
window.addEventListener('resize', updateActiveNav);
    </script>
</body>
</html>